<UserControl x:Class="Count4U.Modules.Audit.Views.InventProductListDetailsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:System="clr-namespace:System;assembly=mscorlib" 
             xmlns:Helpers="clr-namespace:Count4U.Common.Helpers;assembly=Count4U.Common" 
             xmlns:prism="clr-namespace:Microsoft.Practices.Prism.Interactivity.InteractionRequest;assembly=Microsoft.Practices.Prism.Interactivity" 
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
             xmlns:Pagination="clr-namespace:Count4U.CustomControls.Pagination;assembly=Count4U.CustomControls" 
             xmlns:Views="clr-namespace:Count4U.Modules.Audit.Views"
             xmlns:Behaviours="clr-namespace:Count4U.Common.Behaviours;assembly=Count4U.Common"
             xmlns:Common="clr-namespace:Count4U.Common;assembly=Count4U.Common"
             xmlns:cal="clr-namespace:Microsoft.Practices.Prism.Regions;assembly=Microsoft.Practices.Prism"
             xmlns:RoundImageButton="clr-namespace:Count4U.CustomControls.RoundImageButton;assembly=Count4U.CustomControls"
             xmlns:ImageButtonCursor="clr-namespace:Count4U.CustomControls.ImageButtonCursor;assembly=Count4U.CustomControls"
             xmlns:Converters="clr-namespace:Count4U.Common.Converters;assembly=Count4U.Common" 
             xmlns:imageButtonHyperlink="clr-namespace:Count4U.CustomControls.ImageButtonHyperlink;assembly=Count4U.CustomControls"
             mc:Ignorable="d" 
             xmlns:Localization="clr-namespace:Count4U.Localization;assembly=Count4U.Localization"
             xmlns:ImageButton="clr-namespace:Count4U.CustomControls.ImageButton;assembly=Count4U.CustomControls"
             xmlns:actions="clr-namespace:Count4U.Common.Helpers.Actions;assembly=Count4U.Common"
             xmlns:behaviors="clr-namespace:Count4U.CustomControls.Behaviors;assembly=Count4U.CustomControls"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:uiCommandService="clr-namespace:Count4U.Common.Services.UICommandService;assembly=Count4U.Common"
             d:DesignHeight="640" d:DesignWidth="900" >

    <Grid x:Name="gridMain" Background="Transparent">

        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="pack://application:,,,/Count4U.Common,ProcessorArchitecture=MSIL;component/CommonResources.xaml"/>
                    <ResourceDictionary Source="pack://application:,,,/Count4U.CustomControls,ProcessorArchitecture=MSIL;component/Combobox/Combobox.xaml"/>
                    <ResourceDictionary Source="pack://application:,,,/Count4U.CustomControls,ProcessorArchitecture=MSIL;component/DataGrid/DynamicColumnTemplate.xaml"/>
                    <ResourceDictionary Source="pack://application:,,,/Count4U.CustomControls;component/Expander/Expander3.xaml"/>
                </ResourceDictionary.MergedDictionaries>

                <Converters:StringToBrushConverter x:Key="stringToBrush" x:Shared="true" />
                <Converters:DoubleToHebrewConverter x:Key="doubleToHebrew" />
                <Converters:BoolToVisiblityConverter  x:Key="boolToVis" />
                <Converters:StringToBrushConverter x:Key="locationToBrush" />
                <Converters:StringToImageSourceConverter x:Key="stringToImage" />
                

            </ResourceDictionary>

        </Grid.Resources>

        <i:Interaction.Triggers>
            <prism:InteractionRequestTrigger SourceObject="{Binding YesNoRequest}">
                <actions:MessageBoxYesNoAction />
            </prism:InteractionRequestTrigger>

        </i:Interaction.Triggers>

        <Grid.RowDefinitions>
            <RowDefinition Height="48" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- HEADER -->

        <!-- MAIN CONTENT -->

        <Border Grid.Row="0" BorderBrush="Gray" BorderThickness="1" >
            <!--<Grid >-->
            <Grid Background="{StaticResource backForwardLineBrush}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <ContentControl Grid.Column="0" x:Name="backForward" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="5,0,0,0"
												 />

                <Grid Grid.Column="1" Margin="10,0,0,0" SnapsToDevicePixels="True">

                    <!--					Foreground="#CCCCCC"-->

                    <Path
        				Style="{StaticResource verticalLinePart1}"
        				Margin="0,5,0,0" 
        				HorizontalAlignment="Left"
        				VerticalAlignment="Top"
					/>

                    <Path
        				Style="{StaticResource verticalLinePart2}"
        				Margin="1,5,0,0"
        				HorizontalAlignment="Left"
        				VerticalAlignment="Top"
					/>

                    <ImageButton:ImageButton Margin="10,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Center" 
                                             
        				x:Name="btnSearch"                                            
        				ToolTip="{Binding SearchCommand.Title}"
        				ImageSource="{Binding SearchCommand.Icon}"                                             
        				ImageWidth="24" ImageHeight="24" CenterX="12" CenterY="12"/>

                    <TextBlock  
        				Margin="100,0,0,0" 
        				HorizontalAlignment="Left" 										 
        				VerticalAlignment="Top" 								
        				Text="{x:Static Localization:Resources.View_InventProductListDetails_tbChangeItur}"
        				SnapsToDevicePixels="True" Height="17" FontSize="12" FontWeight="Bold" Width="68"/>

                    <Button 
        				Command="{Binding PrevIturCommand}"
        				Margin="60,0,0,5"
        				HorizontalAlignment="Left"
        				VerticalAlignment="Bottom"
        				Height="20"
        				FocusVisualStyle="{x:Null}"
        				Width="17">

                        <Button.Template>
                            <ControlTemplate>
                                <!--Opacity="1"-->
                                <Path		x:Name="path"
        							Stretch="Fill"
        							Data="M 431.83880615234375,109.13758850097656 C432.5459289550781,109.39026641845703 433,109.94917297363281 433,110.567138671875 433,110.567138671875 433,123.43307495117188 433,123.43307495117188 433,124.05034637451172 432.5459289550781,124.60994720458984 431.83880615234375,124.86262512207031 431.1338195800781,125.11563873291016 430.3065185546875,125.01333618164062 429.7273254394531,124.60376739501953 429.7273254394531,124.60376739501953 420.65789794921875,118.1707992553711 420.65789794921875,118.1707992553711 420.2389831542969,117.87451934814453 420,117.44847106933594 420,117.00010681152344 420,116.55277252197266 420.2389831542969,116.12706756591797 420.65789794921875,115.82941436767578 420.65789794921875,115.82941436767578 429.7273254394531,109.39575958251953 429.7273254394531,109.39575958251953 430.3065185546875,108.98619079589844 431.1338195800781,108.88456726074219 431.83880615234375,109.13758850097656 z"
        							Fill="#ffcc99" 
        							Stroke="#FF0C0000" 
        							StrokeThickness="0.5"
                                            
                                            />

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="path" Property="Fill" Value="#666666" />
                                    </Trigger>

                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="path" Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="10" CenterY="10" />
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>

                            </ControlTemplate>

                        </Button.Template>
                    </Button>

                    <TextBox Text="{Binding CurrentIturCode, Mode=TwoWay, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}" 
        				x:Name="txtIturCode"
        				IsReadOnly="False" 
        				Margin="83,19,0,0" 
        				Width="100" 
        				Height="24" 
        				HorizontalAlignment="Left" 
        				VerticalAlignment="Top" 
        				HorizontalContentAlignment="Center" 
        				VerticalContentAlignment="Center" 
        				Style="{StaticResource textBoxErrorStyle}"
        				FontSize="14"/>

                    <Button 
        				Command="{Binding NextIturCommand}"
        				Margin="187,0,0,5"
        				HorizontalAlignment="Left"
        				VerticalAlignment="Bottom"
        				Height="20"
        				FocusVisualStyle="{x:Null}"
        				Width="17">

                        <Button.Template>
                            <ControlTemplate>
                                <!--Opacity="1"-->
                                <Path		
        							x:Name="path"
        							Stretch="Fill"
        							Data="M 537.1611938476562,109.13758850097656 C536.4541015625,109.39026641845703 536,109.94917297363281 536,110.567138671875 536,110.567138671875 536,123.43307495117188 536,123.43307495117188 536,124.05034637451172 536.4541015625,124.60994720458984 537.1611938476562,124.86262512207031 537.8662109375,125.11563873291016 538.6934814453125,125.01333618164062 539.272705078125,124.60376739501953 539.272705078125,124.60376739501953 548.3421020507812,118.1707992553711 548.3421020507812,118.1707992553711 548.760986328125,117.87451934814453 549,117.44847106933594 549,117.00010681152344 549,116.55277252197266 548.760986328125,116.12706756591797 548.3421020507812,115.82941436767578 548.3421020507812,115.82941436767578 539.272705078125,109.39575958251953 539.272705078125,109.39575958251953 538.6934814453125,108.98619079589844 537.8662109375,108.88456726074219 537.1611938476562,109.13758850097656 z"
        							Fill="#ffcc99" 
        							Stroke="#FF0C0000" StrokeThickness="0.5" 
													/>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="path" Property="Fill" Value="#666666" />
                                    </Trigger>

                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="path" Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="10" CenterY="10" />
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>

                            </ControlTemplate>

                        </Button.Template>
                    </Button>

                    <!--=================== ERP Itur Code -->
                    <Button 
        				Command="{Binding PrevErpIturCommand}"
        				Margin="228,0,0,5"
        				HorizontalAlignment="Left"
        				VerticalAlignment="Bottom"
        				Height="20"
        				FocusVisualStyle="{x:Null}"
        				Width="17">

                        <Button.Template>
                            <ControlTemplate>
                                <!--Opacity="1"-->
                                <Path		x:Name="path"
        							Stretch="Fill"
        							Data="M 431.83880615234375,109.13758850097656 C432.5459289550781,109.39026641845703 433,109.94917297363281 433,110.567138671875 433,110.567138671875 433,123.43307495117188 433,123.43307495117188 433,124.05034637451172 432.5459289550781,124.60994720458984 431.83880615234375,124.86262512207031 431.1338195800781,125.11563873291016 430.3065185546875,125.01333618164062 429.7273254394531,124.60376739501953 429.7273254394531,124.60376739501953 420.65789794921875,118.1707992553711 420.65789794921875,118.1707992553711 420.2389831542969,117.87451934814453 420,117.44847106933594 420,117.00010681152344 420,116.55277252197266 420.2389831542969,116.12706756591797 420.65789794921875,115.82941436767578 420.65789794921875,115.82941436767578 429.7273254394531,109.39575958251953 429.7273254394531,109.39575958251953 430.3065185546875,108.98619079589844 431.1338195800781,108.88456726074219 431.83880615234375,109.13758850097656 z"
        							Fill="#ffcc99" 
        							Stroke="#FF0C0000" 
        							StrokeThickness="0.5"
                                            
                                            />

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="path" Property="Fill" Value="#666666" />
                                    </Trigger>

                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="path" Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="10" CenterY="10" />
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>

                            </ControlTemplate>

                        </Button.Template>
                    </Button>

                    <TextBlock  
        				Margin="280,0,0,0" 
        				HorizontalAlignment="Left" 										 
        				VerticalAlignment="Top" 								
        				Text="{x:Static Localization:Resources.View_InventProductListDetails_tbChangeERPItur}"
        				SnapsToDevicePixels="True" Height="17" FontSize="12" FontWeight="Bold" Width="180"/>
                    
                    <TextBox x:Name="txtErpIturCode"
                         Height="24"
                     	Margin="250,19,0,0" 
            	      	HorizontalAlignment="Left" 
        				VerticalAlignment="Top" 
                        Width="180" 
                        Style="{StaticResource textBoxErrorStyle}"
        				FontSize="14"
                         >
                        <TextBox.Text>
                            <Binding Path="GoToErpIturCode" UpdateSourceTrigger="Explicit" IsAsync="False" >
                                <Binding.ValidationRules>
                                    <DataErrorValidationRule></DataErrorValidationRule>
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>

                    <Button 
        				Command="{Binding NextErpIturCommand}"
        				Margin="434,0,0,5"
        				HorizontalAlignment="Left"
        				VerticalAlignment="Bottom"
        				Height="20"
        				FocusVisualStyle="{x:Null}"
        				Width="17">

                        <Button.Template>
                            <ControlTemplate>
                                <!--Opacity="1"-->
                                <Path		
        							x:Name="path"
        							Stretch="Fill"
        							Data="M 537.1611938476562,109.13758850097656 C536.4541015625,109.39026641845703 536,109.94917297363281 536,110.567138671875 536,110.567138671875 536,123.43307495117188 536,123.43307495117188 536,124.05034637451172 536.4541015625,124.60994720458984 537.1611938476562,124.86262512207031 537.8662109375,125.11563873291016 538.6934814453125,125.01333618164062 539.272705078125,124.60376739501953 539.272705078125,124.60376739501953 548.3421020507812,118.1707992553711 548.3421020507812,118.1707992553711 548.760986328125,117.87451934814453 549,117.44847106933594 549,117.00010681152344 549,116.55277252197266 548.760986328125,116.12706756591797 548.3421020507812,115.82941436767578 548.3421020507812,115.82941436767578 539.272705078125,109.39575958251953 539.272705078125,109.39575958251953 538.6934814453125,108.98619079589844 537.8662109375,108.88456726074219 537.1611938476562,109.13758850097656 z"
        							Fill="#ffcc99" 
        							Stroke="#FF0C0000" StrokeThickness="0.5" 
													/>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="path" Property="Fill" Value="#666666" />
                                    </Trigger>

                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="path" Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="10" CenterY="10" />
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>

                            </ControlTemplate>

                        </Button.Template>
                    </Button>

                    <ImageButton:ImageButton Margin="500,0,0,0" 
        				HorizontalAlignment="Left" 
        				VerticalAlignment="Center" 	
        				Command="{Binding PrintReportCommand}"
        				ToolTip="{Binding IturFastPrintReportCode}"					
        				ImageSource="{Binding PrintReportCommand.Icon}"                            
        				ImageWidth="30" 
        				ImageHeight="30"
        				CenterX="12"
        				CenterY="12"/>

                    <TextBlock 
                                Margin="0,0,20,0" 
                                Text="{Binding Path=AdapterFromPDA}" 
                                Height="15"
                                HorizontalAlignment="Right" 
                                VerticalAlignment="Center"/>

                </Grid>
            </Grid>
        </Border>

        <!-- MAIN CONTENT -->

        <Grid Grid.Row="1" Margin="0,0,0,0">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="433"  />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="145"  />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Left itur grid -->

            <Grid Grid.Row="0" Grid.Column="0" Margin="10,13,0,0" SnapsToDevicePixels="True" HorizontalAlignment="Left">
                <Grid.RowDefinitions>
                    <RowDefinition Height="28" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Border Background="#64C1FF" BorderThickness="1" BorderBrush="#049BFF" Width="415" HorizontalAlignment="Left">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock
                                   Text="{x:Static Localization:Resources.View_InventProductListDetails_tbIturInfo}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left"
                                   Grid.Column="0"
                                   Margin="10,0,0,0"/>

                        <TextBlock FontSize="12" 
                                   FontFamily="Tahoma" 
                                   FontWeight="Bold" 
                                   Text="{Binding Itur.IturCode}"
                                   Grid.Column="1"
                                   Margin="5,0,0,0"
                                   VerticalAlignment="Center" 
                                   HorizontalAlignment="Left" />

                        <Border Margin="10,0,0,0" 
                                Width="50" 
                                Height="19"  
                                Grid.Column="2"
                                VerticalAlignment="Center" 
                                BorderThickness="1"
                                BorderBrush="White" 
                                HorizontalAlignment="Left">
                            <Rectangle  Fill="{Binding IturStatusColor, Converter={StaticResource stringToBrush}}" />
                        </Border>

                        <TextBlock VerticalAlignment="Center"
                                   Grid.Column="3"
                                   Margin="10,0,0,0"
                                   HorizontalAlignment="Left"
                                   Text="{x:Static Localization:Resources.ViewModel_InventProductListDetails_TotalItems}" 
                                       />

                        <TextBlock Margin="5,0,0,0" 
                                   VerticalAlignment="Center" 
                                   Grid.Column="4"
                                   Text="{Binding TotalNumberOfItems.Value}" 
                                   FontSize="12" 
                                   FontFamily="Tahoma" 
                                   FontWeight="Bold"/>

                        <StackPanel Grid.Column="5" HorizontalAlignment="Right" Margin="0,0,5,0" VerticalAlignment="Center" Orientation="Horizontal">

                            <!--                            Command="{Binding IturReportCommand}"-->

                            <RoundImageButton:RoundImageButton VerticalAlignment="Center"
                                                               Command="{Binding ChangeIturNameCommand}" 
                                                               ToolTip="{Binding ChangeIturNameCommand.Title}"
																ImageSource="{Binding ChangeIturNameCommand.Icon16}"/>


                            <RoundImageButton:RoundImageButton x:Name="btnReportItur"
                                                               VerticalAlignment="Center"                                                                        
                                                               ToolTip="{Binding ReportCommand.Title}"
															   ImageSource="{Binding ReportCommand.Icon16}">
                                <i:Interaction.Behaviors>
                                    <Behaviours:ContextMenuLeftButtonBehavior />
                                </i:Interaction.Behaviors>
                            </RoundImageButton:RoundImageButton>

                            <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                               Command="{Binding IturRefreshCommand}" 
                                                               ToolTip="{Binding IturRefreshCommand.Title}"
															   ImageSource="{Binding IturRefreshCommand.Icon16}"/>

                            <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                               Command="{Binding IturDisableCommand}" 
                                                               ToolTip="{Binding IturEnableDisableStatus}"
															   >
                                <RoundImageButton:RoundImageButton.Style>
                                    <Style TargetType="{x:Type RoundImageButton:RoundImageButton}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IturEnabled}" Value="True">
                                                <Setter Property="ImageSource" Value="{x:Static uiCommandService:UICommandIconRepository.Enable}"/>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding IturEnabled}" Value="False">
                                                <Setter Property="ImageSource" Value="{x:Static uiCommandService:UICommandIconRepository.Disable}"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </RoundImageButton:RoundImageButton.Style>
                            </RoundImageButton:RoundImageButton>
                        </StackPanel>
                    </Grid>
                </Border>

                <Grid Grid.Row="1" Margin="0,0,0,0" x:Name="gridIturItems"  Width="417">

                    <!--<Grid.Resources> Marina
                        <Style x:Key="darkBorder" TargetType="{x:Type Border}">
                            <Setter Property="Width" Value="129" />
                            <Setter Property="Height" Value="22" />
                            <Setter Property="BorderThickness" Value="1" />
                            <Setter Property="BorderBrush" Value="#049BFF" />
                            <Setter Property="Background" Value="#B3E0FF" />
                        </Style>
                        <Style x:Key="lightBorder" TargetType="{x:Type Border}">
                            <Setter Property="Width" Value="129" />
                            <Setter Property="Height" Value="22" />
                            <Setter Property="BorderThickness" Value="1" />
                            <Setter Property="BorderBrush" Value="#B3E0FF" />
                            <Setter Property="Background" Value="#ECF8FF" />
                        </Style>
                    </Grid.Resources>-->


                    <ItemsControl ItemsSource="{Binding IturInfo}" BorderBrush="Transparent" BorderThickness="0" x:Name="listIturInfo">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel x:Name="wrapPanelIturInfo"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Vertical" Margin="0,3,3,0" >
                                    <Border Style="{StaticResource darkBorderIturItems}"  >
                                        <TextBlock Text="{Binding Value1}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                    <Border Style="{StaticResource lightBorderIturItems}" Margin="0,3,0,0" ToolTip="{Binding Tooltip}">
                                        <TextBlock Text="{Binding Value2}" HorizontalAlignment="Center" VerticalAlignment="Center" FlowDirection ="LeftToRight"/>
                                    </Border>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                    </ItemsControl>
                </Grid>
            </Grid>

            <!-- top main grid -->

            <Border  Grid.Row="0" Grid.Column="1" 
                     Margin="0,7,7,0" 
                     BorderThickness="3" 
                     BorderBrush="#FF9900" 
                     CornerRadius="3" 
                     Padding="3" 
                     HorizontalAlignment="Stretch">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="28" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Margin="0,0,2,0" Background="#FFCC00" BorderThickness="1" BorderBrush="#CEA500">
                        <Grid>
                            <TextBlock  Text="{x:Static Localization:Resources.View_InventProductListDetails_tbDocumentHeaders}"
                                        FontSize="15" FontWeight="Bold" Margin="5,0,0,0" Foreground="#372D00" VerticalAlignment="Center" />

                            <StackPanel HorizontalAlignment="Right" Margin="0,0,5,0" VerticalAlignment="Center" Orientation="Horizontal">

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" Command="{Binding EditDocumentHeaderCommand}" 
                                                                   ToolTip="{Binding EditDocumentHeaderCommand.Title}"
																									 ImageSource="{Binding EditDocumentHeaderCommand.Icon16}"/>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" Command="{Binding AddDocumentHeaderCommand}" 
                                                                   ToolTip="{Binding AddDocumentHeaderCommand.Title}"
																									 ImageSource="{Binding AddDocumentHeaderCommand.Icon16}"/>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" Command="{Binding DeleteDocumentHeaderCommand}" 
                                                                   ToolTip="{Binding DeleteDocumentHeaderCommand.Title}"
																   ImageSource="{Binding DeleteDocumentHeaderCommand.Icon16}"/>


                                <RoundImageButton:RoundImageButton x:Name="btnReportDocument" VerticalAlignment="Center"  
                                                                   ToolTip="{Binding ReportCommand.Title}"
                                                                   IsEnabled="{Binding IsAnyDocumentSelected}"
																   ImageSource="{Binding ReportCommand.Icon16}">
                                    <i:Interaction.Behaviors>
                                        <Behaviours:ContextMenuLeftButtonBehavior />
                                    </i:Interaction.Behaviors>
                                </RoundImageButton:RoundImageButton>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" Command="{Binding RefreshDocumentHeaderCommand}" 
                                                                   ToolTip="{Binding RefreshDocumentHeaderCommand.Title}"
															   ImageSource="{Binding RefreshDocumentHeaderCommand.Icon16}"/>
                            </StackPanel>
                        </Grid>
                    </Border>


                    <DataGrid Grid.Row="1" Grid.Column="0" Margin="0"			
							Background="Transparent"
							BorderBrush="Transparent" BorderThickness="0"
							ItemsSource="{Binding DocumentHeaderItems}" 			
							x:Name="dataGrid"
                            VirtualizingStackPanel.VirtualizationMode="Standard"  
							SelectionMode="Single"
							SelectedItem="{Binding DocumentHeaderSelectedItem}"
                            CanUserDeleteRows ="True"
							>
                            <DataGrid.Resources>
                            <ResourceDictionary>
                                <ResourceDictionary.MergedDictionaries>
                                    <ResourceDictionary Source="pack://application:,,,/Count4U.CustomControls;component/MdiThemes/Theme1.xaml"/>
                                </ResourceDictionary.MergedDictionaries>
                            </ResourceDictionary>
                        </DataGrid.Resources>

                        <DataGrid.InputBindings>
                            <KeyBinding Key="Delete" Command="{Binding DeleteDocumentHeaderCommand}" />
                        </DataGrid.InputBindings>
                        
                        <DataGrid.Columns>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnApprove}"
                                                    Width="60" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsApprove, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsThreeState="False" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnDocumentCode}"
                                                    Width="*" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid Background="Transparent" ToolTip="{Binding DocumentCode, Mode=OneWay}">
                                            <TextBlock Text="{Binding DocumentCode, Mode=OneWay}" HorizontalAlignment="Left" />
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnCreateDate}"
                                                    Width="*" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid Background="Transparent" ToolTip="{Binding CreateDate, Mode=OneWay}">
                                            <TextBlock Text="{Binding CreateDate, Mode=OneWay}" HorizontalAlignment="Center" />
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnDeviceId}"
                                                    Width="*" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Name, Mode=OneWay}" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            
                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnWorker}"
                                                    Width="*" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding WorkerId, Mode=OneWay}" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                           

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnIturName}"
                                                    Width="*" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding IturName, Mode=OneWay}" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnDocumentNumber}"
                                                    Width="*" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Num, Mode=OneWay}" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_InventProductListDetails_columnTotalItems}"
                                                    Width="70" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding TotalItems.Value, Mode=OneWay}" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Width="50" >
                                <DataGridTemplateColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{x:Static Localization:Resources.View_InventProductListDetails_tbStatusDocHeaderBit}"
                                                   ToolTip="{x:Static Localization:Resources.View_InventProductListDetails_tbStatusDocHeaderBit}"
                                                   />
                                    </DataTemplate>
                                </DataGridTemplateColumn.HeaderTemplate>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid ToolTip="{Binding StatusDocHeaderBitTooltip, Mode=OneWay}"
                                              Background="Transparent"  >

                                            <TextBlock Text="{Binding StatusDocHeaderBit, Mode=OneWay}"                                                    
                                                   HorizontalAlignment="Center" />
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Width="50" >
                                <DataGridTemplateColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock
                                            Text="{x:Static Localization:Resources.View_InventProductListDetails_tbStatusInventProductBit}"
                                            ToolTip="{x:Static Localization:Resources.View_InventProductListDetails_tbStatusInventProductBit}"
                                            />
                                    </DataTemplate>
                                </DataGridTemplateColumn.HeaderTemplate>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid ToolTip="{Binding StatusInventProductBitTooltip, Mode=OneWay}"
                                              Background="Transparent" >
                                            <TextBlock Text="{Binding StatusInventProductBit, Mode=OneWay}" Background="Transparent"                                                   
                                                   HorizontalAlignment="Center" />
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Width="50" >
                                <DataGridTemplateColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock 
                                            Text="{x:Static Localization:Resources.View_InventProductListDetails_tbStatusApproveBit}"
                                            ToolTip="{x:Static Localization:Resources.View_InventProductListDetails_tbStatusApproveBit}"
                                            />
                                    </DataTemplate>
                                </DataGridTemplateColumn.HeaderTemplate>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid ToolTip="{Binding StatusApproveBitTooltip, Mode=OneWay}"
                                              Background="Transparent" >
                                            <TextBlock Text="{Binding StatusApproveBit, Mode=OneWay}" Background="Transparent"                                                   
                                                   HorizontalAlignment="Center" />
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="" Width="40" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid >
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <ImageButtonCursor:ImageButtonCursor Grid.Column="0" 
                                                    HorizontalAlignment="Center" 
                                                    ToolTip="{Binding DataContext.ResetErrorDocumentHeaderNotSelectedCommand.Title, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"                                                                                     
                                                    Command="{Binding DataContext.ResetErrorDocumentHeaderNotSelectedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
									                CommandParameter="{Binding .}" 
                                                    ImageSource="{Binding DataContext.ResetErrorDocumentHeaderNotSelectedCommand.Icon16, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                    ImageWidth="12" ImageHeight="12"/>

                                            <ImageButtonCursor:ImageButtonCursor Grid.Column="1" HorizontalAlignment="Center" 
                                                    ToolTip="{Binding DataContext.ClearDocumentHeaderNotSelectedCommand.Title, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                    Command="{Binding DataContext.ClearDocumentHeaderNotSelectedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
									                CommandParameter="{Binding .}" 
                                                    ImageSource="{Binding DataContext.ClearDocumentHeaderNotSelectedCommand.Icon16, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                    ImageWidth="12" ImageHeight="12"/>

                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                        </DataGrid.Columns>
                        <!-- add DH contextMenu -->
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem                                
                                          Command="{Binding EditDocumentHeaderCommand}"                                          
                                          Header="{x:Static Localization:Resources.Command_Edit}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding EditInventProductCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                                <MenuItem Command="{Binding CloneDocumentHeaderCommand}"  
                              Header="{x:Static Localization:Resources.Command_Clone}"
                              >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding CloneCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>


                                <MenuItem 
                                          Command="{Binding DeleteDocumentHeaderCommand}"                                          
                                          Header="{x:Static Localization:Resources.Command_Delete}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding DeleteInventProductCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                                <MenuItem 
                                        Command="{Binding ResetErrorDocumentHeaderCommand}"
                                        Header="{x:Static Localization:Resources.Command_ResetErrorStatus}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding ResetErrorInventProductSelectedCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                             
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>

                </Grid>
            </Border>

            <!-- bottom main grid -->

            <Border Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" 
                    Margin="7,5,7,7" Padding="3" CornerRadius="3" 
                    BorderThickness="3" BorderBrush="#99CC00">
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="28" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!--					-->

                    <Border Grid.Row="0" Padding="0" Margin="0,0,2,0" BorderThickness="1" BorderBrush="#709401" Background="#99CC01">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Margin="10,0,0,0" 
                                       Text="{x:Static Localization:Resources.View_InventProductListDetails_tbInventProducts}"
                                       FontSize="15" FontWeight="Bold" VerticalAlignment="Center" Foreground="#405500" />

                            <TextBlock Grid.Column="1" 
                                       Text="{x:Static Localization:Resources.Command_Find}"
                                       Margin="7,0,0,0" VerticalAlignment="Center"/>

                            <ComboBox Grid.Column="2" Margin="5,0,0,0" VerticalAlignment="Center" Width="90" 
												Style="{StaticResource CustomComboBoxStyle}"
												ItemsSource="{Binding SearchItems}" SelectedItem="{Binding SearchItem}" Height="21"/>
                            <!--                            <TextBox Grid.Column="3" Width="90" Margin="5,0,0,0" VerticalAlignment="Center" -->
                            <!--                                     Text="{Binding Path=SearchExpression, UpdateSourceTrigger=Explicit}" -->
                            <!--                                     MaxLength="50" Height="19" Name="txtIpSearch">-->
                            <!--                                <i:Interaction.Behaviors>-->
                            <!--                                    <Behaviours:TextChangedDelayedBehaviour IsTimerEnabled="{Binding Path=SearchExpressionIsTimerEnabled}" />-->
                            <!--                                </i:Interaction.Behaviors>-->
                            <!--                            </TextBox>-->

                            <TextBox Grid.Column="3" Width="90" Margin="5,0,0,0" VerticalAlignment="Center"                                      
                                     MaxLength="50" Height="19" x:Name="txtIpSearch">
                                <i:Interaction.Behaviors>
                                    <Behaviours:TextChangedDelayedBehavior2 BehaviorText="{Binding SearchExpression, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                </i:Interaction.Behaviors>
                            </TextBox>


                            <Pagination:Pagination Grid.Column="4" HorizontalAlignment="Stretch" Margin="10,0,0,0" 
															 PageSize="{Binding PageSize, Mode=TwoWay}" 
															 PageCurrent="{Binding PageCurrent, Mode=TwoWay}" 
															 ItemsTotal="{Binding ItemsTotal, Mode=TwoWay}"
															 Background="{StaticResource vertLineGreenBrush}"																		
															 VerticalAlignment="Center"  />

                            <Grid Grid.Column="5" Width="90">
                                <ComboBox x:Name="editorTemplateCombobox" Height="21" 
                                          VerticalAlignment="Center"
                                          Style="{StaticResource CustomComboBoxStyle}"
                                          ItemsSource="{Binding ProductEditorComboViewModel.EditorTemplateList}"
                                          SelectedItem="{Binding ProductEditorComboViewModel.EditorTemplateCurrent}"
                                          DisplayMemberPath="Title" 
                                          Margin="5,0,5,2"
                                          />
                            </Grid>

                            <CheckBox Grid.Column="6" VerticalAlignment="Stretch" Margin="2,0,2,0" Width="105" IsChecked="{Binding IsOnlyWithError}" >
                                <TextBlock Text="{x:Static Localization:Resources.View_CommonInventProduct_chkOnlyWithError}"
                                               TextWrapping="Wrap" FontSize="10"/>
                            </CheckBox>

                            <StackPanel Grid.Column="7" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="10,0,5,0">

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                                   Command="{Binding EditInventProductCommand}" 
                                                                   ToolTip="{Binding EditInventProductCommand.Title}"
																   ImageSource="{Binding EditInventProductCommand.Icon16}"/>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                                   Command="{Binding AddInventProductCommand}" 
                                                                   ToolTip="{Binding AddInventProductCommand.Title}"
																   ImageSource="{Binding AddInventProductCommand.Icon16}"/>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                                   Command="{Binding DeleteInventProductCommand}" 
                                                                   ToolTip="{Binding DeleteInventProductCommand.Title}"
																   ImageSource="{Binding DeleteInventProductCommand.Icon16}"/>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                                   ToolTip="{Binding ReportCommand.Title}"
                                                                   x:Name="btnReportInventProduct"
                                                                   IsEnabled="{Binding IsAnyDocumentSelected}"
																   ImageSource="{Binding ReportCommand.Icon16}">
                                    <i:Interaction.Behaviors>
                                        <Behaviours:ContextMenuLeftButtonBehavior />
                                    </i:Interaction.Behaviors>
                                </RoundImageButton:RoundImageButton>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                                   Command="{Binding RefreshInventProductCommand}" 
                                                                   ToolTip="{Binding RefreshInventProductCommand.Title}"
															       ImageSource="{Binding RefreshInventProductCommand.Icon16}"/>

                                <RoundImageButton:RoundImageButton VerticalAlignment="Center" 
                                                                   Command="{Binding ResetInventProductCommand}" 
                                                                   ToolTip="{Binding ResetInventProductCommand.Title}"
															       ImageSource="{Binding ResetInventProductCommand.Icon16}"/>

                            </StackPanel>

                        </Grid>
                    </Border>
                    <!--"Single"-->
                    <Grid Grid.Row="1" Margin="5,5,0,5">
                        <Grid.ColumnDefinitions >
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <DataGrid Grid.Row="0" Grid.Column="0" 
							Margin="0,0,0,0" 
                            ItemsSource="{Binding InventProductItems}"		
                            VirtualizingStackPanel.IsVirtualizing="True"
                            VirtualizingStackPanel.VirtualizationMode="Standard"  
							SelectedItem="{Binding InventProductSelectedItem}"
							SelectionMode="Single"
							BorderBrush="Transparent" BorderThickness="0"
                            IsReadOnly="False"
                            AutoGenerateColumns="False"                                  
                            x:Name="dataGridInventProduct"
                            CanUserDeleteRows="True" VerticalScrollBarVisibility="Visible"
							>

                        <DataGrid.Resources>
                            <ResourceDictionary>
                                <ResourceDictionary.MergedDictionaries>
                                    <ResourceDictionary Source="pack://application:,,,/Count4U.CustomControls;component/DataGrid/DataGrid.xaml"/>
                                </ResourceDictionary.MergedDictionaries>
                            </ResourceDictionary>
                        </DataGrid.Resources>

                        <i:Interaction.Behaviors>
                            <Behaviours:DataGridBehavior 
                                EditCommand="{Binding EditCommand}"
                                CommitCommand="{Binding CommitCommand}"
                                CancelCommand="{Binding CancelCommand}" 
                                />
                        </i:Interaction.Behaviors>

                        <DataGrid.Columns>
                            
                                <DataGridTemplateColumn >
                                    <!--Header="{x:Static Localization:Resources.View_InventProductListDetails_columnApprove}"  Width="40" >-->

                                    <DataGridTemplateColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <CheckBox Margin="3,0,3,0" 
                                 IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, 
                                    Path=DataContext.CheckSelect, 
                                    UpdateSourceTrigger=PropertyChanged, 
                                    Mode=TwoWay}"
                                  IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, 
                                    Path=DataContext.IsCheckedEnabled, 
                                    UpdateSourceTrigger=PropertyChanged}"
                                    VerticalAlignment="Center" 
                                    HorizontalAlignment="Center" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.HeaderTemplate>

                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding CheckSelect, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsThreeState="False" HorizontalAlignment="Center" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            
                                <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnMakat}"
                                                    Width="130" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Makat, Mode=OneWay}" HorizontalAlignment="Center" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                                <DataGridTemplateColumn x:Name ="NativPhoto" 
                                                        Header="{x:Static Localization:Resources.View_CommonInventProduct_columnPhoto}"
                                                    Width="40"
                                                     Visibility="Hidden">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Grid Background="Transparent" >
                                                <Image HorizontalAlignment="Center"
                                                                             Grid.Column="0" 
                                                                             Margin="0,0,0,0"
                                                           Width="16" Height="16"
                                                        Source="{Binding ShowToolTip, Mode=OneWay, Converter={StaticResource stringToImage}}">
                                                    <Image.ToolTip >
                                                        <ToolTip Background="LightBlue">
                                                            <StackPanel>
                                                                <Image Width="300" Height="400" 
                                                                       Source="{Binding Path=.ToolTipPaint, Mode=OneWay, Converter={StaticResource stringToImage}}" >
                                                                </Image>
                                                                <TextBlock Text="{Binding Path=.ToolTip}" />
                                                            </StackPanel>
                                                        </ToolTip>
                                                    </Image.ToolTip>
                                                </Image>

                                                <!--<Image x:Name="myImage" Source="c:\Pictures\Airplane.jpg" DataContext="{Binding RelativeSource={RelativeSource Self}}" Width="50" Height="50">
                                                    <Image.ToolTip>
                                                        <Image Width="300" Height="600" Source="{Binding Path=Source}"/>
                                                    </Image.ToolTip>
                                                </Image>-->
                                            </Grid>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnProductName}"
                                                    Width="*" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding ProductName, Mode=OneWay}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--                            EditingElementStyle="{StaticResource textBoxErrorStyle}"-->
                            <!--                            <DataGridTextColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnQuantityEdit}" -->
                            <!--                                                Binding="{Binding Path=QuantityEdit, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"-->
                            <!--                                                Width="*"     -->
                            <!--                                                EditingElementStyle="{StaticResource textBoxErrorStyle}"-->
                            <!--                                                >                              -->
                            <!--                                <DataGridTextColumn.ElementStyle>-->
                            <!--                                    <Style TargetType="{x:Type TextBlock}">-->
                            <!--                                        <Setter Property="Text" Value="{Binding Path=QuantityEdit, Converter={StaticResource doubleToHebrew}}"></Setter>-->
                            <!--                                        <Style.Triggers>-->
                            <!--                                            <DataTrigger Binding="{Binding Path=IsQuantityChanged}" Value="True">-->
                            <!--                                                <Setter Property="Background" Value="Salmon" />-->
                            <!--                                            </DataTrigger>-->
                            <!--                                        </Style.Triggers>-->
                            <!--                                    </Style>-->
                            <!--                                </DataGridTextColumn.ElementStyle>-->
                            <!---->
                            <!--                            </DataGridTextColumn>-->

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnQuantityEdit}"
                                                                                Width="80" IsReadOnly="False" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid x:Name="grid" Background="Transparent">
                                            <TextBlock Text="{Binding QuantityEdit, Converter={StaticResource doubleToHebrew}, Mode=OneWay}" HorizontalAlignment="Left" />
                                        </Grid>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding IsQuantityChanged}" Value="True">
                                                    <Setter TargetName="grid" Property="Background" Value="{Binding Path=RemarkColor, Converter={StaticResource locationToBrush}}" />
                                            </DataTrigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>

                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <TextBox x:Name="textBox" 
                                                 MaxLength="10" 
                                                 FlowDirection="LeftToRight"
                                                 Style="{StaticResource textBoxErrorStyle}"                                                                                                                             
                                                                             >
                                            <i:Interaction.Behaviors>
                                                <behaviors:TextSelectBehavior />
                                            </i:Interaction.Behaviors>
                                                <Binding Path="QuantityEdit" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" >
                                                <Binding.ValidationRules>
                                                    <DataErrorValidationRule/>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox>
                                        <DataTemplate.Triggers>
                                            <Trigger SourceName="textBox" Property="IsVisible" Value="True" >
                                                <Setter TargetName="textBox" Property="FocusManager.FocusedElement" Value="{Binding ElementName=textBox}" />
                                            </Trigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnInputType}"
                                                    Width="40" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding InputType, Mode=OneWay}" HorizontalAlignment="Right" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnCreateDate}"
                                                    Width="60" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding CreateDate, Mode=OneWay}" HorizontalAlignment="Right" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnSerialNumber}"
                                                    Width="80" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding SerialNumber, Mode=OneWay}" HorizontalAlignment="Right" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnOriginalCode}"
                                                    Width="100" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding BarCode, Mode=OneWay}" HorizontalAlignment="Right" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnNum}"
                                                    Width="50" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid x:Name="grid1" Background="Transparent"  ToolTip="{Binding Remark}">
                                        <TextBlock Text="{Binding Num, Mode=OneWay}" HorizontalAlignment="Center" />
                                        </Grid>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding HasRemark}" Value="True">
                                                    <Setter TargetName="grid1"  Property="Background" Value="{Binding Path=RemarkColor, Converter={StaticResource locationToBrush}}" >
                                                    </Setter>
      
                                                </DataTrigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>


                            <!--<DataTemplate>
                                <Grid x:Name="grid" Background="Transparent">
                                    <TextBlock Text="{Binding QuantityEdit, Converter={StaticResource doubleToHebrew}, Mode=OneWay}" HorizontalAlignment="Left" />
                                </Grid>
                                <DataTemplate.Triggers>
                                    <DataTrigger Binding="{Binding IsQuantityChanged}" Value="True">
                                        <Setter TargetName="grid" Property="Background" Value="Salmon" />
                                    </DataTrigger>
                                </DataTemplate.Triggers>
                            </DataTemplate>-->

                            <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CommonInventProduct_columnStatusBit}"
                                                    Width="40" IsReadOnly="True" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid Background="Transparent" ToolTip="{Binding StatusTooltip}">
                                            <TextBlock Text="{Binding Status, Mode=OneWay}" HorizontalAlignment="Right" />
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                      


                                <DataGridTemplateColumn Header="" Width="*"  Visibility="Hidden" >
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid x:Name="stackEdit" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"  />
                                                        <!--<ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />-->
                                                    </Grid.ColumnDefinitions>

                                                    <!--РАБОТАЕТ-->
                                                    <!--<Image HorizontalAlignment="Center"
                                                                             Grid.Column="0" 
                                                                             Margin="0,0,0,0"
                                                           Width="16" Height="16"
                                                        Source="{Binding Path=DataContext.ShowImageCommand.Icon16,RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                                        Converter={StaticResource stringToImage}}">
                                                        <Image.ToolTip >
                                                            <ToolTip Background="LightBlue">
                                                                <StackPanel>
                                                                    <Image Source="{Binding Path=.ToolTipPaint}" >
                                                                     </Image>
                                                                    <TextBlock Text="{Binding Path=.ToolTipPaint}" />
                                                                </StackPanel>
                                                            </ToolTip>
                                                        </Image.ToolTip>
                                                    </Image>-->
                                                </Grid>
                                            </Grid>

                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <!--<imageButtonHyperlink:ImageButtonHyperlink  Grid.Column="0"
                                             HorizontalAlignment="Center" 
                                             VerticalAlignment="Center" 		
                                             Margin="0,0,0,0"
                                              ImageSource="{Binding Path=DataContext.ShowImageCommand.Icon16, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                             Command="{Binding Path=ShowImageCommand}"
                                             Text="{Binding Path=ShowImageCommand.Title}"
                                             ImageWidth="12" 
                                             ImageHeight="12"                                              
                                              ToolTip="{Binding Path=DataContext.ShowImageCommand.Icon16, Mode=OneWay}"
                                               >
                                              </imageButtonHyperlink:ImageButtonHyperlink>-->


                                                    <!--<ImageButtonCursor:ImageButtonCursor HorizontalAlignment="Center"
                                                                             Grid.Column="0" 
                                                                             Margin="0,0,0,0"
                                                		Command="{Binding Path=DataContext.ShowImageCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
												        CommandParameter="{Binding Path=.}"
                                                        ImageSource="{Binding Path=DataContext.ShowImageCommand.Icon16,RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                        ImageWidth="12" 
                                                        ImageHeight="12" 
                                                        >
                                                      </ImageButtonCursor:ImageButtonCursor>-->

                                                    <!--РАБОТАЕТ-->
                                                    <!--<Image HorizontalAlignment="Center"
                                                                             Grid.Column="0" 
                                                                             Margin="0,0,0,0"
                                                           Width="16" Height="16"
                                                        Source="{Binding Path=DataContext.ShowImageCommand.Icon16,RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                                        Converter={StaticResource stringToImage}}">
                                                        <Image.ToolTip >
                                                            <ToolTip Background="LightBlue">
                                                                <StackPanel>
                                                                    <Image Source="{Binding Path=.ToolTipPaint}" >
                                                                     </Image>
                                                                    <TextBlock Text="{Binding Path=.ToolTipPaint}" />
                                                                </StackPanel>
                                                            </ToolTip>
                                                        </Image.ToolTip>
                                                    </Image>-->
                                                    

                                                    <!--<Image Source="{Binding Path=DataContext.ShowImageCommand.Icon16, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />-->
                                                    <!--ToolTip="{Binding Path=DataContext.ShowImageCommand.Icon16, Converter={StaticResource stringToImage}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}">-->

                                                    <!--<ToolTip 
                                                         Background="Blue"  
                                                              Foreground="White">
                                                            <StackPanel>
                                                                <TextBlock Margin="3"
                                                                    FontSize="14">Text Goes Here</TextBlock>
                                                                <Image Source="images/yourImage.jpg" />
                                                            </StackPanel>
                                                        </ToolTip>-->
                                                        <!--<ImageButtonCursor.ToolTip>
                                                            <ToolTip 
                                                 Background="Blue"  
                                                Foreground="White">
                                                                <StackPanel>
                                                                          <TextBlock Margin="3"
                                                    FontSize="14">Text Goes Here</TextBlock>
                                                                        <Image Source="images/yourImage.jpg" />
                                                                </StackPanel>
                                                            </ToolTip>
                                                        </ImageButtonCursor.ToolTip>-->
                                                    <!--</ImageButtonCursor:ImageButtonCursor>-->

                                                    <!--<ImageButtonCursor:ImageButtonCursor HorizontalAlignment="Center"
                                                                             Grid.Column="0" 
                                                                             Margin="0,0,0,0"
                                                		Command="{Binding Path=DataContext.EditSelectedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
												        CommandParameter="{Binding Path=.}"
                                                        ImageSource="{Binding Path=DataContext.EditSelectedCommand.Icon16, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                        ImageWidth="12" 
                                                        ImageHeight="12">
                                                    </ImageButtonCursor:ImageButtonCursor>

                                                    <ImageButtonCursor:ImageButtonCursor Grid.Column="1" 
                                                                         HorizontalAlignment="Center" 
                                                                         Margin="0,0,0,0"
                                                 	Command="{Binding Path=DataContext.ChildSelectedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
									                CommandParameter="{Binding Path=.}"                                                    
                                                    ImageSource="{Binding Path=DataContext.ChildSelectedCommand.Icon, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                    ImageWidth="12" 
                                                    ImageHeight="12">
                                                    </ImageButtonCursor:ImageButtonCursor>

                                                    <ImageButtonCursor:ImageButtonCursor Grid.Column="2" 
                                                                             HorizontalAlignment="Center" 
                                                                             Margin="0,0,0,0"
                                                 	Command="{Binding Path=DataContext.DeleteSelectedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
											        CommandParameter="{Binding Path=.}"                                                    
                                                    ImageSource="{Binding Path=DataContext.DeleteSelectedCommand.Icon16, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"                                                                                                                                 
                                                    ImageWidth="12" 
                                                    ImageHeight="12">
                                                    </ImageButtonCursor:ImageButtonCursor>-->

                                         

                                                <!--<StackPanel x:Name="stackView" Orientation="Horizontal" HorizontalAlignment="Center"  VerticalAlignment="Center">

                                                    <ImageButtonCursor:ImageButtonCursor HorizontalAlignment="Center" Margin="0,0,0,0"
                                                    Command="{Binding DataContext.ViewCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
											        CommandParameter="{Binding .}"
                                                     ImageSource="{Binding DataContext.ViewCommand.Icon, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                    ImageWidth="12" ImageHeight="12">
                                                    </ImageButtonCursor:ImageButtonCursor>

                                                </StackPanel>-->
                                          

                                            <!--<DataTemplate.Triggers>
                                                <DataTrigger Binding="{Binding Path=DataContext.Context, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Converter={StaticResource contextToBool}}" Value="True"  >
                                                    <Setter TargetName="stackView" Property="Visibility" Value="Visible" />
                                                    <Setter TargetName="stackEdit" Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=DataContext.Context, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Converter={StaticResource contextToBool}}" Value="False"  >
                                                    <Setter TargetName="stackView" Property="Visibility" Value="Collapsed" />
                                                    <Setter TargetName="stackEdit" Property="Visibility" Value="Visible" />
                                                </DataTrigger>

                                            </DataTemplate.Triggers>-->

                             
                            </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem                                
                                          Command="{Binding EditInventProductCommand}"                                          
                                          Header="{x:Static Localization:Resources.Command_Edit}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding EditInventProductCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                                <MenuItem Command="{Binding CloneCommand}"  
                              Header="{x:Static Localization:Resources.Command_Clone}"
                              >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding CloneCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                              <MenuItem Command="{Binding Path=CopyCommand}" 
                              Header="{x:Static Localization:Resources.Command_Copy}"
                              >
                                        <MenuItem.Icon>
                                            <Image Source="{Binding Path=CopyCommand.Icon}" Width="24" Height="24" />
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem 
                                          Command="{Binding DeleteInventProductCommand}"                                          
                                          Header="{x:Static Localization:Resources.Command_Delete}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding DeleteInventProductCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                                    <MenuItem 
                                          Command="{Binding DeleteAllCheckSelectInventProductCommand}"                                          
                                          Header="{x:Static Localization:Resources.Command_DeleteAllCheckSelect}"
                                    >
                                        <MenuItem.Icon>
                                            <Image Source="{Binding DeleteAllCheckSelectInventProductCommand.Icon}" Width="24" Height="24" />
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem 
                                          Command="{Binding ResetErrorInventProductSelectedCommand}"                                          
                                          Header="{x:Static Localization:Resources.Command_ResetErrorStatus}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding ResetErrorInventProductSelectedCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>

                                <MenuItem 
                                          Command="{Binding ResetQuantityInventProductCommand}"                                          
                                          Header="{x:Static Localization:Resources.View_InventProductListDetails_tbUndo}"
                                    >
                                    <MenuItem.Icon>
                                        <Image Source="{Binding ResetQuantityInventProductCommand.Icon}" Width="24" Height="24" />
                                    </MenuItem.Icon>
                                </MenuItem>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>
                        
                        <Grid Grid.Row="0" Grid.Column="1" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="3*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            
                            <DataGrid Grid.Row="0" Grid.Column="0" Margin="10,0,0,0"
                             Visibility="{Binding Path=IsDataGridProperyVisibility, Converter={StaticResource boolToVis}}"
							Background="Transparent"
							BorderBrush="Transparent" BorderThickness="0"
							ItemsSource="{Binding Path=DetailItems}" 			
							Name="detailDataGrid"
                            VirtualizingStackPanel.VirtualizationMode="Standard"  
							SelectionMode="Single"
							SelectedItem="{Binding Path=DetailSelectedItem}"
                            IsReadOnly="False"
							>
                            <DataGrid.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/Count4U.CustomControls;component/MdiThemes/Theme4.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </DataGrid.Resources>

                            <i:Interaction.Behaviors>
                                <Behaviours:DataGridBehavior 
                                EditCommand="{Binding Path=EditDetailGridCommand}"
                                CommitCommand="{Binding Path=CommitDetailGridCommand}"
                                CancelCommand="{Binding Path=CancelDetailGridCommand}" 
                                />
                            </i:Interaction.Behaviors>

                            <DataGrid.Columns>

                                <DataGridTemplateColumn Width="100" MinWidth="100" MaxWidth="100">
                        
                                    <DataGridTemplateColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{x:Static Localization:Resources.View_CatalogForm_columnPropertyName}"                                        
                                       ToolTip="{x:Static Localization:Resources.View_CatalogForm_columnPropertyName}"
                                       HorizontalAlignment="Stretch" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.HeaderTemplate>

                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=Title, Mode=OneWay}" HorizontalAlignment="Left" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <!--<DataGridTemplateColumn Width="150" MinWidth="150" MaxWidth="150">

                                    <DataGridTemplateColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{x:Static Localization:Resources.View_CatalogForm_columnPropertyCode}"                                        
                                       ToolTip="{x:Static Localization:Resources.View_CatalogForm_columnPropertyCode}"
                                       HorizontalAlignment="Stretch" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.HeaderTemplate>

                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=PropertyStrCode, Mode=OneWay}" HorizontalAlignment="Left"
                                            ToolTip="{Binding Path=PropertyStrCode}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>-->

                                <DataGridTemplateColumn Header="{x:Static Localization:Resources.View_CatalogForm_columnPropertyCode}"
                                                                                Width="150" MinWidth="150" MaxWidth="150" IsReadOnly="False" >
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Grid Name="grid1" Background="Transparent">
                                                <TextBlock Text="{Binding Path=PropertyStrCode, Mode=OneWay}" HorizontalAlignment="Left" 
                                                ToolTip="{Binding Path=PropertyStrCode}" />
                                            </Grid>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>

                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <TextBox Name="textBox1" 
                                     MaxLength="50" 
                                     FlowDirection="LeftToRight"
                                     Style="{StaticResource textBoxErrorStyle}"                                                                                                                                                                         
                                                                             >
                                                <i:Interaction.Behaviors>
                                                    <behaviors:TextSelectBehavior />
                                                </i:Interaction.Behaviors>
                                                <TextBox.Text>
                                                    <Binding Path="PropertyStrCode" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" >
                                                        <Binding.ValidationRules>
                                                            <DataErrorValidationRule></DataErrorValidationRule>
                                                        </Binding.ValidationRules>
                                                    </Binding>
                                                </TextBox.Text>

                                            </TextBox>
                                            <DataTemplate.Triggers>
                                                <Trigger SourceName="textBox1" Property="IsVisible" Value="True" >
                                                    <Setter TargetName="textBox1" Property="FocusManager.FocusedElement" Value="{Binding ElementName=textBox1}" />
                                                </Trigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Width="150" MinWidth="150" MaxWidth="150">

                                    <DataGridTemplateColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{x:Static Localization:Resources.View_CatalogForm_columnPropertyValue}"                                        
                                       ToolTip="{x:Static Localization:Resources.View_CatalogForm_columnPropertyValue}"
                                       HorizontalAlignment="Stretch" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.HeaderTemplate>

                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=PropertyStrName, Mode=OneWay}" HorizontalAlignment="Left" 
                                                        ToolTip="{Binding Path=PropertyStrName}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>


                            </DataGrid.Columns>
                        </DataGrid>
                            <Grid Grid.Row="1" Grid.Column="0" 
                                  Name="photoGrid"
                                   Visibility="{Binding Path=IsDataGridProperyVisibility, Converter={StaticResource boolToVis}}"
                          
							Background="Transparent"
							>
                                <StackPanel Name="photoPanel"   Visibility="Hidden" >
                                    <Image Name="photoImage" Width="100" Height="133" 
                                     Source="{Binding Path=ToolTipPaint, Mode=OneWay, Converter={StaticResource stringToImage}}" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                    </Image>
                                    <!--<TextBlock Name="photoTextBlock" Text="{Binding Path=ToolTip}" Margin="80,4,10,0" 
                                               VerticalAlignment="Bottom" 
                                               HorizontalAlignment="Stretch" Background="Beige"/>-->
                                    <!--<TextBlock Name="photoTextBlock" Margin="10,0,0,0" Height="50" Width="100" />-->
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <xctk:BusyIndicator Grid.RowSpan="2" IsBusy="{Binding IsBusy}" 
                                BusyContent="{x:Static Localization:Resources.View_InventProductListDetails_busyPrinting}"
                                />
    </Grid>
</UserControl>
